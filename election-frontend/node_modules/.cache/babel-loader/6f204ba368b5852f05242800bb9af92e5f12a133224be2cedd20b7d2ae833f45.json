{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport jwtDecode from 'jwt-decode';\nimport { API_URL } from '../config.js';\nimport images from '../assets/party';\nexport default {\n  name: 'CommunitiesComponent',\n  data() {\n    return {\n      showLoginPrompt: false,\n      showGuidelines: false,\n      communities: [],\n      loading: true,\n      selectedCommunityId: null,\n      joinedCommunityId: null,\n      partyImages: images\n    };\n  },\n  created() {\n    this.fetchCommunities();\n  },\n  methods: {\n    fetchCommunities() {\n      fetch(`${API_URL}/api/communities`).then(response => response.json()).then(data => {\n        this.communities = data;\n        this.loading = false;\n      }).catch(error => {\n        console.error('Error fetching communities:', error);\n        this.loading = false;\n      });\n    },\n    getCommunityImage(communityName) {\n      return this.partyImages[communityName.toLowerCase()] || '';\n    },\n    openGuidelines(communityId) {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        this.showLoginPrompt = true;\n      } else {\n        this.selectedCommunityId = communityId;\n        this.showGuidelines = true;\n      }\n    },\n    closeGuidelines() {\n      this.showGuidelines = false;\n      this.selectedCommunityId = null;\n    },\n    acceptGuidelines() {\n      this.showGuidelines = false;\n      this.attemptJoinCommunity(this.selectedCommunityId);\n    },\n    attemptJoinCommunity(communityId) {\n      const token = localStorage.getItem('token');\n      if (token) {\n        if (this.joinedCommunityId) {\n          alert('You can only join one community chat.');\n        } else {\n          this.joinCommunityAction(communityId);\n        }\n      } else {\n        this.showLoginPrompt = true;\n      }\n    },\n    async joinCommunityAction(communityId) {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        this.showLoginPrompt = true;\n        return;\n      }\n      try {\n        const decodedToken = jwtDecode(token);\n        const userId = decodedToken.id;\n        const response = await fetch(`${API_URL}/api/communities/${communityId}/join?userId=${userId}`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error('Failed to join community chat.');\n        }\n        this.joinedCommunityId = communityId;\n        this.$router.push({\n          name: 'CommunityChat',\n          params: {\n            communityId\n          }\n        });\n      } catch (error) {\n        console.error('Error joining community chat:', error);\n        alert('An error occurred while trying to join the community.');\n      }\n    },\n    redirectToLogin() {\n      this.showLoginPrompt = false;\n      this.$router.push({\n        name: 'Login'\n      });\n    }\n  }\n};","map":{"version":3,"names":["jwtDecode","API_URL","images","name","data","showLoginPrompt","showGuidelines","communities","loading","selectedCommunityId","joinedCommunityId","partyImages","created","fetchCommunities","methods","fetch","then","response","json","catch","error","console","getCommunityImage","communityName","toLowerCase","openGuidelines","communityId","token","localStorage","getItem","closeGuidelines","acceptGuidelines","attemptJoinCommunity","alert","joinCommunityAction","decodedToken","userId","id","method","headers","Authorization","ok","Error","$router","push","params","redirectToLogin"],"sources":["/Users/suhayb/MijnProjecten/cuuruuvoovii16/election-frontend/src/components/CommunitiesComponent.vue"],"sourcesContent":["<template>\n  <div class=\"community-list\">\n    <h2>Communities:</h2>\n    <div v-if=\"loading\">Loading...</div>\n    <div v-if=\"!loading\">\n      <div v-for=\"community in communities\" :key=\"community.id\" class=\"community-card\">\n        <img class=\"image\" :src=\"getCommunityImage(community.name)\" :alt=\"community.name\" />\n        <div class=\"community-info\">\n          <h3>{{ community.name }}</h3>\n          <p>{{ community.description }}</p>\n          <div class=\"community-footer\">\n            <span>{{ community.members }} Members</span>\n            <button class=\"join-button\" @click=\"openGuidelines(community.id)\">JOIN</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"showLoginPrompt\" class=\"modal-overlay\">\n      <div class=\"modal-content\">\n        <p>Please log in to join a community.</p>\n        <button @click=\"redirectToLogin\" class=\"close-button\">Log In</button>\n      </div>\n    </div>\n\n    <div v-if=\"showGuidelines\" class=\"modal-overlay\">\n      <div class=\"modal-content\">\n        <h3>Community Guidelines</h3>\n        <ul>\n          <li>Be respectful to all members.</li>\n          <li>No spamming or inappropriate content.</li>\n          <li>Follow the community's specific rules.</li>\n          <li>Any violations may result in being reported or removed.</li>\n        </ul>\n        <div class=\"guidelines-actions\">\n          <button @click=\"acceptGuidelines\" class=\"accept-button\">Accept</button>\n          <button @click=\"closeGuidelines\" class=\"close-button\">Decline</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport jwtDecode from 'jwt-decode';\nimport { API_URL } from '../config.js';\nimport images from '../assets/party';\n\nexport default {\n  name: 'CommunitiesComponent',\n  data() {\n    return {\n      showLoginPrompt: false,\n      showGuidelines: false,\n      communities: [],\n      loading: true,\n      selectedCommunityId: null,\n      joinedCommunityId: null,\n      partyImages: images,\n    };\n  },\n  created() {\n    this.fetchCommunities();\n  },\n  methods: {\n    fetchCommunities() {\n      fetch(`${API_URL}/api/communities`)\n          .then((response) => response.json())\n          .then((data) => {\n            this.communities = data;\n            this.loading = false;\n          })\n          .catch((error) => {\n            console.error('Error fetching communities:', error);\n            this.loading = false;\n          });\n    },\n    getCommunityImage(communityName) {\n      return this.partyImages[communityName.toLowerCase()] || '';\n    },\n    openGuidelines(communityId) {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        this.showLoginPrompt = true;\n      } else {\n        this.selectedCommunityId = communityId;\n        this.showGuidelines = true;\n      }\n    },\n    closeGuidelines() {\n      this.showGuidelines = false;\n      this.selectedCommunityId = null;\n    },\n    acceptGuidelines() {\n      this.showGuidelines = false;\n      this.attemptJoinCommunity(this.selectedCommunityId);\n    },\n    attemptJoinCommunity(communityId) {\n      const token = localStorage.getItem('token');\n      if (token) {\n        if (this.joinedCommunityId) {\n          alert('You can only join one community chat.');\n        } else {\n          this.joinCommunityAction(communityId);\n        }\n      } else {\n        this.showLoginPrompt = true;\n      }\n    },\n    async joinCommunityAction(communityId) {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        this.showLoginPrompt = true;\n        return;\n      }\n\n      try {\n        const decodedToken = jwtDecode(token);\n        const userId = decodedToken.id;\n\n        const response = await fetch(`${API_URL}/api/communities/${communityId}/join?userId=${userId}`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to join community chat.');\n        }\n\n        this.joinedCommunityId = communityId;\n        this.$router.push({ name: 'CommunityChat', params: { communityId } });\n      } catch (error) {\n        console.error('Error joining community chat:', error);\n        alert('An error occurred while trying to join the community.');\n      }\n    },\n    redirectToLogin() {\n      this.showLoginPrompt = false;\n      this.$router.push({ name: 'Login' });\n    },\n  },\n};\n</script>\n<style scoped>\n.community-list {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 2rem;\n}\n\nh2 {\n  margin-bottom: 1.5rem;\n  font-size: 2rem;\n  color: #333;\n}\n\n.community-card {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: #fff;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  margin: 1rem;\n  padding: 1rem;\n  width: 300px;\n  transition: transform 0.3s ease;\n}\n\n.community-card:hover {\n  transform: scale(1.05);\n}\n\n.image {\n  width: 100px;\n  height: 100px;\n  object-fit: contain;\n  margin-bottom: 1rem;\n}\n\n.community-info {\n  text-align: center;\n}\n\n.community-info h3 {\n  font-size: 1.5rem;\n  margin-bottom: 0.5rem;\n  color: #555;\n}\n\n.community-info p {\n  font-size: 1rem;\n  color: #777;\n  margin-bottom: 1rem;\n}\n\n.community-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n}\n\n.community-footer span {\n  font-size: 0.9rem;\n  color: #555;\n}\n\n.join-button {\n  background-color: #007bff;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.join-button:hover {\n  background-color: #0056b3;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: white;\n  padding: 2rem;\n  border-radius: 10px;\n  width: 500px;\n  max-width: 90%;\n}\n\n.guidelines-actions {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 1rem;\n}\n\n.accept-button {\n  background-color: #28a745;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.accept-button:hover {\n  background-color: #218838;\n}\n\n.close-button {\n  background-color: #dc3545;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.close-button:hover {\n  background-color: #c82333;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}