{"ast":null,"code":"import { ref, onMounted, computed } from \"vue\";\nimport axios from \"axios\";\nexport default {\n  __name: 'AdminPageComponent',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const users = ref([]);\n    const searchTerm = ref('');\n    const filteredUsers = computed(() => {\n      return Array.isArray(users.value) ? users.value.filter(user => user.email.toLowerCase().includes(searchTerm.value.toLowerCase().trim())) : [];\n    });\n    const fetchUsers = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/admin/users`, {\n          headers: {\n            'Authorization': token\n          }\n        });\n        users.value = response.data;\n      } catch (error) {\n        console.error('Error fetching users', error);\n      }\n    };\n    async function toggleUserStatus(userId, isActive) {\n      const adminId = localStorage.getItem('userId');\n      try {\n        await axios.put(`${API_URL}/user/${userId}/status`, null, {\n          params: {\n            isActive: !isActive\n          },\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': token,\n            'UserId': adminId\n          }\n        });\n        const user = users.value.find(u => u.id === userId);\n        if (user) {\n          user.active = !isActive;\n        }\n      } catch (error) {\n        if (error.response && error.response.status === 403) {\n          window.alert('You cannot deactivate your own account.');\n        } else {\n          console.error('Error updating user status:', error);\n        }\n      }\n    }\n    onMounted(() => {\n      if (isAdmin()) {\n        fetchUsers();\n      }\n    });\n    const __returned__ = {\n      users,\n      searchTerm,\n      filteredUsers,\n      fetchUsers,\n      toggleUserStatus,\n      ref,\n      onMounted,\n      computed,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","axios","users","searchTerm","filteredUsers","Array","isArray","value","filter","user","email","toLowerCase","includes","trim","fetchUsers","response","get","API_URL","headers","token","data","error","console","toggleUserStatus","userId","isActive","adminId","localStorage","getItem","put","params","find","u","id","active","status","window","alert","isAdmin"],"sources":["/Users/suhayb/Documenten/cuuruuvoovii16/election-frontend/src/components/AdminPageComponent.vue"],"sourcesContent":["<template>\n  <div class=\"parent\">\n    <div id=\"nav\"><h1>Admin</h1>\n      <div class=\"profileBtn\" v-if=\"isLoggedIn()\">\n        <div class=\"dropdown\">\n          <button class=\"dropbtn\">Profile</button>\n          <div class=\"dropdown-content\"><a @click=\"$router.push('/profile')\">Profile</a> <a v-if=\"isAdmin()\"\n                                                                                            @click=\"$router.push('/admin')\">Admin</a>\n            <a @click=\"logOut()\">Logout</a></div>\n        </div>\n      </div>\n    </div>\n    <div id=\"left\"><h1>Overview</h1>\n      <button class=\"btn\" @click=\"$router.push('/')\">Home</button>\n      <button class=\"btn\" @click=\"$router.push('/results')\">Election results</button>\n      <button class=\"btn\" @click=\"$router.push('/chat')\">Chat</button>\n      <button class=\"btn\" @click=\"$router.push('/faq')\">Faq</button>\n      <button class=\"btn\" @click=\"$router.push('/about')\">About us</button>\n    </div>\n    <div id=\"body\">\n      <div class=\"header-container\"><h1>Userlist</h1>        <input v-model=\"searchTerm\" type=\"text\"\n                                                                    placeholder=\"Search users by email...\"\n                                                                    class=\"search-input\"/></div>\n      <div class=\"table__body\">\n        <table>\n          <thead>\n          <tr>\n            <th> Id</th>\n            <th> Name</th>\n            <th> Surname</th>\n            <th> Email</th>\n            <th> Account status</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr v-for=\"user in filteredUsers\" :key=\"user.id\">\n            <td>{{ user.id }}</td>\n            <td>{{ user.name }}</td>\n            <td>{{ user.surname }}</td>\n            <td>{{ user.email }}</td>\n            <td>\n              <button :id=\"'button-' + user.id\" :class=\"{'active-btn': user.active, 'inactive-btn': !user.active}\"\n                      @click=\"toggleUserStatus(user.id, user.active)\"> {{ user.active ? 'Active' : 'Deactivate' }}\n              </button>\n            </td>\n          </tr>\n          <tr v-if=\"filteredUsers.length === 0\">\n            <td colspan=\"5\" style=\"text-align: center;\">No users found</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n\n</template>\n<script setup>\n\n\nimport {ref, onMounted, computed} from \"vue\";\nimport axios from \"axios\";\n\nconst users = ref([]);\nconst searchTerm = ref('');\nconst filteredUsers = computed(() => {\n  return Array.isArray(users.value) ? users.value.filter(user => user.email.toLowerCase().includes(searchTerm.value.toLowerCase().trim())) : [];\n});\nconst fetchUsers = async () => {\n  try {\n    const response = await axios.get(`${API_URL}/admin/users`, {headers: {'Authorization': token,}});\n    users.value = response.data;\n  } catch (error) {\n    console.error('Error fetching users', error);\n  }\n};\n\nasync function toggleUserStatus(userId, isActive) {\n  const adminId = localStorage.getItem('userId');\n  try {\n    await axios.put(`${API_URL}/user/${userId}/status`, null, {\n      params: {isActive: !isActive},\n      headers: {'Content-Type': 'application/json', 'Authorization': token, 'UserId': adminId}\n    });\n    const user = users.value.find(u => u.id === userId);\n    if (user) {\n      user.active = !isActive;\n    }\n  } catch (error) {\n    if (error.response && error.response.status === 403) {\n      window.alert('You cannot deactivate your own account.');\n    } else {\n      console.error('Error updating user status:', error);\n    }\n  }\n}\n\nonMounted(() => {\n  if (isAdmin()) {\n    fetchUsers();\n  }\n});\n</script>\n<style scoped>.parent {\n  display: grid;\n  grid-template-rows: 0.2fr 1fr;\n  grid-template-columns: 0.5fr 1fr 1fr;\n  height: 100vh;\n}\n\n#left {\n  background-color: #D9D9D9;\n  grid-row: 2 / 4;\n  grid-column: 1 / 2;\n  padding-left: 2rem;\n}\n\n#nav {\n  background-color: #C9C9C9;\n  grid-row: 1 / 2;\n  grid-column: 1 / 4;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 2rem;\n}\n\n#body {\n  grid-row: 2 / 4;\n  grid-column: 2 / 4;\n  padding: 1rem;\n}\n\n#footer {\n  margin: 0;\n}\n\n.btn {\n  width: 90%;\n}\n\n.dropdown {\n  position: relative;\n  display: inline-block;\n}\n\n.dropdown-content {\n  display: none;\n  position: absolute;\n  background-color: white;\n  min-width: 160px;\n}\n\n.dropdown-content a {\n  color: black;\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n}\n\n.dropdown-content a:hover {\n  background-color: #1D4BF2;\n  color: white;\n  cursor: pointer;\n}\n\n.dropdown:hover .dropdown-content {\n  display: block;\n}\n\n.table__body {\n  width: 95%;\n  max-height: 80%;\n  background-color: #fffb;\n  margin: .8rem auto;\n  border-radius: .6rem;\n  overflow-y: auto;\n}\n\ntable {\n  width: 100%;\n}\n\ntable, th, td {\n  border-collapse: collapse;\n  padding: 1rem;\n  text-align: left;\n}\n\nthead th {\n  position: sticky;\n  top: 0;\n  background-color: #d5d1defe;\n  z-index: 1;\n}\n\ntbody tr:nth-child(even) {\n  background-color: #0000000b;\n}\n\n#button {\n  width: 80%;\n}\n\n.header-container {\n  display: flex;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n\n.search-input {\n  max-width: 20%;\n  padding: 0.5rem;\n  margin-left: 45rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.active-btn {\n  background-color: blue; /* Actief is blauw */\n}\n\n.inactive-btn {\n  background-color: grey; /* Inactief is grijs */\n}</style>"],"mappings":"AA2DA,SAAQA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAO,KAAK;AAC5C,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,KAAK,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMK,UAAU,GAAGL,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMM,aAAa,GAAGJ,QAAQ,CAAC,MAAM;MACnC,OAAOK,KAAK,CAACC,OAAO,CAACJ,KAAK,CAACK,KAAK,CAAC,GAAGL,KAAK,CAACK,KAAK,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,KAAK,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACT,UAAU,CAACI,KAAK,CAACI,WAAW,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IAC/I,CAAC,CAAC;IACF,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAACe,GAAG,CAAC,GAAGC,OAAO,cAAc,EAAE;UAACC,OAAO,EAAE;YAAC,eAAe,EAAEC;UAAM;QAAC,CAAC,CAAC;QAChGjB,KAAK,CAACK,KAAK,GAAGQ,QAAQ,CAACK,IAAI;MAC7B,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C;IACF,CAAC;IAED,eAAeE,gBAAgBA,CAACC,MAAM,EAAEC,QAAQ,EAAE;MAChD,MAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;MAC9C,IAAI;QACF,MAAM3B,KAAK,CAAC4B,GAAG,CAAC,GAAGZ,OAAO,SAASO,MAAM,SAAS,EAAE,IAAI,EAAE;UACxDM,MAAM,EAAE;YAACL,QAAQ,EAAE,CAACA;UAAQ,CAAC;UAC7BP,OAAO,EAAE;YAAC,cAAc,EAAE,kBAAkB;YAAE,eAAe,EAAEC,KAAK;YAAE,QAAQ,EAAEO;UAAO;QACzF,CAAC,CAAC;QACF,MAAMjB,IAAI,GAAGP,KAAK,CAACK,KAAK,CAACwB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKT,MAAM,CAAC;QACnD,IAAIf,IAAI,EAAE;UACRA,IAAI,CAACyB,MAAM,GAAG,CAACT,QAAQ;QACzB;MACF,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACd,IAAIA,KAAK,CAACN,QAAQ,IAAIM,KAAK,CAACN,QAAQ,CAACoB,MAAM,KAAK,GAAG,EAAE;UACnDC,MAAM,CAACC,KAAK,CAAC,yCAAyC,CAAC;QACzD,CAAC,MAAM;UACLf,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;QACrD;MACF;IACF;IAEAtB,SAAS,CAAC,MAAM;MACd,IAAIuC,OAAO,CAAC,CAAC,EAAE;QACbxB,UAAU,CAAC,CAAC;MACd;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}