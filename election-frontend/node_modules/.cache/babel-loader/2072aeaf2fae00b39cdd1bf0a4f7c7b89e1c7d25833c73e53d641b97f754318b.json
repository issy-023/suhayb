{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"community-list\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = [\"src\", \"alt\"];\nconst _hoisted_5 = {\n  class: \"community-info\"\n};\nconst _hoisted_6 = {\n  class: \"community-footer\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n  key: 2,\n  class: \"modal-overlay\"\n};\nconst _hoisted_9 = {\n  class: \"modal-content\"\n};\nconst _hoisted_10 = {\n  key: 3,\n  class: \"modal-overlay\"\n};\nconst _hoisted_11 = {\n  class: \"modal-content\"\n};\nconst _hoisted_12 = {\n  class: \"guidelines-actions\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[6] || (_cache[6] = _createElementVNode(\"h2\", null, \"Communities:\", -1 /* HOISTED */)), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"Loading...\")) : _createCommentVNode(\"v-if\", true), !$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.communities, community => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: community.id,\n      class: \"community-card\"\n    }, [_createElementVNode(\"img\", {\n      class: \"image\",\n      src: $options.getCommunityImage(community.name),\n      alt: community.name\n    }, null, 8 /* PROPS */, _hoisted_4), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h3\", null, _toDisplayString(community.name), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(community.description), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", null, _toDisplayString(community.members) + \" Members\", 1 /* TEXT */), _createElementVNode(\"button\", {\n      class: \"join-button\",\n      onClick: $event => $options.openGuidelines(community.id)\n    }, \"JOIN\", 8 /* PROPS */, _hoisted_7)])])]);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true), $data.showLoginPrompt ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_cache[3] || (_cache[3] = _createElementVNode(\"p\", null, \"Please log in to join a community.\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.redirectToLogin && $options.redirectToLogin(...args)),\n    class: \"close-button\"\n  }, \"Log In\")])])) : _createCommentVNode(\"v-if\", true), $data.showGuidelines ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_cache[4] || (_cache[4] = _createElementVNode(\"h3\", null, \"Community Guidelines\", -1 /* HOISTED */)), _cache[5] || (_cache[5] = _createElementVNode(\"ul\", null, [_createElementVNode(\"li\", null, \"Be respectful to all members.\"), _createElementVNode(\"li\", null, \"No spamming or inappropriate content.\"), _createElementVNode(\"li\", null, \"Follow the community's specific rules.\"), _createElementVNode(\"li\", null, \"Any violations may result in being reported or removed.\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.acceptGuidelines && $options.acceptGuidelines(...args)),\n    class: \"accept-button\"\n  }, \"Accept\"), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.closeGuidelines && $options.closeGuidelines(...args)),\n    class: \"close-button\"\n  }, \"Decline\")])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","$data","loading","_hoisted_2","_createCommentVNode","_hoisted_3","_Fragment","_renderList","communities","community","id","src","$options","getCommunityImage","name","alt","_hoisted_4","_hoisted_5","_toDisplayString","description","_hoisted_6","members","onClick","$event","openGuidelines","_hoisted_7","showLoginPrompt","_hoisted_8","_hoisted_9","_cache","args","redirectToLogin","showGuidelines","_hoisted_10","_hoisted_11","_hoisted_12","acceptGuidelines","closeGuidelines"],"sources":["/Users/suhayb/MijnProjecten/cuuruuvoovii16/election-frontend/src/components/CommunitiesComponent.vue"],"sourcesContent":["<template>\n  <div class=\"community-list\">\n    <h2>Communities:</h2>\n    <div v-if=\"loading\">Loading...</div>\n    <div v-if=\"!loading\">\n      <div v-for=\"community in communities\" :key=\"community.id\" class=\"community-card\">\n        <img class=\"image\" :src=\"getCommunityImage(community.name)\" :alt=\"community.name\" />\n        <div class=\"community-info\">\n          <h3>{{ community.name }}</h3>\n          <p>{{ community.description }}</p>\n          <div class=\"community-footer\">\n            <span>{{ community.members }} Members</span>\n            <button class=\"join-button\" @click=\"openGuidelines(community.id)\">JOIN</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"showLoginPrompt\" class=\"modal-overlay\">\n      <div class=\"modal-content\">\n        <p>Please log in to join a community.</p>\n        <button @click=\"redirectToLogin\" class=\"close-button\">Log In</button>\n      </div>\n    </div>\n\n    <div v-if=\"showGuidelines\" class=\"modal-overlay\">\n      <div class=\"modal-content\">\n        <h3>Community Guidelines</h3>\n        <ul>\n          <li>Be respectful to all members.</li>\n          <li>No spamming or inappropriate content.</li>\n          <li>Follow the community's specific rules.</li>\n          <li>Any violations may result in being reported or removed.</li>\n        </ul>\n        <div class=\"guidelines-actions\">\n          <button @click=\"acceptGuidelines\" class=\"accept-button\">Accept</button>\n          <button @click=\"closeGuidelines\" class=\"close-button\">Decline</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport jwtDecode from 'jwt-decode';\nimport { API_URL } from '../config.js';\nimport images from '../assets/party';\n\nexport default {\n  name: 'CommunitiesComponent',\n  data() {\n    return {\n      showLoginPrompt: false,\n      showGuidelines: false,\n      communities: [],\n      loading: true,\n      selectedCommunityId: null,\n      joinedCommunityId: null,\n      partyImages: {\n        'vvd': VVD,\n        'd66': D66,\n        'pvv': PVV,\n        'pvda': PVDA,\n        'sp': SP,\n        'fvd': FVD,\n        'cda': CDA,\n        'denk': Denk,\n        'groenLinks': GroenLinks,\n        '50plus': VijftigPlus,\n        'bbb': BBB,\n        'ja21': JA21,\n        'nsc': NSC,\n        'opnl': OPNL,\n        'pvdd': PvdD,\n        'sgp': SGP,\n        'volt': Volt,\n      },\n    };\n  },\n  created() {\n    this.fetchCommunities();\n  },\n  methods: {\n    fetchCommunities() {\n      fetch(`${API_URL}/api/communities`)\n          .then((response) => response.json())\n          .then((data) => {\n            this.communities = data;\n            this.loading = false;\n          })\n          .catch((error) => {\n            console.error('Error fetching communities:', error);\n            this.loading = false;\n          });\n    },\n    getCommunityImage(communityName) {\n      return this.partyImages[communityName.toLowerCase()] || '';\n    },\n    openGuidelines(communityId) {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        this.showLoginPrompt = true;\n      } else {\n        this.selectedCommunityId = communityId;\n        this.showGuidelines = true;\n      }\n    },\n    closeGuidelines() {\n      this.showGuidelines = false;\n      this.selectedCommunityId = null;\n    },\n    acceptGuidelines() {\n      this.showGuidelines = false;\n      this.attemptJoinCommunity(this.selectedCommunityId);\n    },\n    attemptJoinCommunity(communityId) {\n      const token = localStorage.getItem('token');\n      if (token) {\n        if (this.joinedCommunityId) {\n          alert('You can only join one community chat.');\n        } else {\n          this.joinCommunityAction(communityId);\n        }\n      } else {\n        this.showLoginPrompt = true;\n      }\n    },\n    async joinCommunityAction(communityId) {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        this.showLoginPrompt = true;\n        return;\n      }\n\n      try {\n        const decodedToken = jwtDecode(token);\n        const userId = decodedToken.id;\n\n        const response = await fetch(`${API_URL}/api/communities/${communityId}/join?userId=${userId}`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to join community chat.');\n        }\n\n        this.joinedCommunityId = communityId;\n        this.$router.push({ name: 'CommunityChat', params: { communityId } });\n      } catch (error) {\n        console.error('Error joining community chat:', error);\n        alert('An error occurred while trying to join the community.');\n      }\n    },\n    redirectToLogin() {\n      this.showLoginPrompt = false;\n      this.$router.push({ name: 'Login' });\n    },\n  },\n};\n</script>\n<style scoped>\n.community-list {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 2rem;\n}\n\nh2 {\n  margin-bottom: 1.5rem;\n  font-size: 2rem;\n  color: #333;\n}\n\n.community-card {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: #fff;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  margin: 1rem;\n  padding: 1rem;\n  width: 300px;\n  transition: transform 0.3s ease;\n}\n\n.community-card:hover {\n  transform: scale(1.05);\n}\n\n.image {\n  width: 100px;\n  height: 100px;\n  object-fit: contain;\n  margin-bottom: 1rem;\n}\n\n.community-info {\n  text-align: center;\n}\n\n.community-info h3 {\n  font-size: 1.5rem;\n  margin-bottom: 0.5rem;\n  color: #555;\n}\n\n.community-info p {\n  font-size: 1rem;\n  color: #777;\n  margin-bottom: 1rem;\n}\n\n.community-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n}\n\n.community-footer span {\n  font-size: 0.9rem;\n  color: #555;\n}\n\n.join-button {\n  background-color: #007bff;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.join-button:hover {\n  background-color: #0056b3;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: white;\n  padding: 2rem;\n  border-radius: 10px;\n  width: 500px;\n  max-width: 90%;\n}\n\n.guidelines-actions {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 1rem;\n}\n\n.accept-button {\n  background-color: #28a745;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.accept-button:hover {\n  background-color: #218838;\n}\n\n.close-button {\n  background-color: #dc3545;\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.close-button:hover {\n  background-color: #c82333;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}