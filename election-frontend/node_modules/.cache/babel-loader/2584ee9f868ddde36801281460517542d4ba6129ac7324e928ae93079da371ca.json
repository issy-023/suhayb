{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"chat-wrapper\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  id: \"username-page\"\n};\nconst _hoisted_3 = {\n  class: \"username-page-container\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  key: 1,\n  id: \"chat-page\"\n};\nconst _hoisted_6 = {\n  class: \"chat-container\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"connecting\"\n};\nconst _hoisted_8 = {\n  id: \"messageArea\"\n};\nconst _hoisted_9 = {\n  class: \"message\"\n};\nconst _hoisted_10 = {\n  class: \"sender\"\n};\nconst _hoisted_11 = {\n  class: \"form-group\"\n};\nconst _hoisted_12 = {\n  class: \"input-group clearfix\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[8] || (_cache[8] = _createElementVNode(\"noscript\", null, [_createElementVNode(\"h2\", null, \"Sorry! Your browser doesn't support Javascript\")], -1 /* HOISTED */)), $data.showUsernamePage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[5] || (_cache[5] = _createElementVNode(\"h1\", {\n    class: \"title\"\n  }, \"Type your username to enter the Chatroom\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.connect && $options.connect(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event),\n    placeholder: \"Username\",\n    autocomplete: \"off\",\n    class: \"form-control\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.username]])]), _cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"form-group\"\n  }, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"accent username-submit\"\n  }, \" Start Chatting \")], -1 /* HOISTED */))], 32 /* NEED_HYDRATION */)])])) : _createCommentVNode(\"v-if\", true), !$data.showUsernamePage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n    class: \"chat-header\"\n  }, [_createElementVNode(\"h2\", null, \"LiveChat\")], -1 /* HOISTED */)), $data.isConnecting ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" Connecting... \")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"ul\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, (message, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index,\n      class: _normalizeClass({\n        'self': message.sender === $data.username,\n        'other': message.sender !== $data.username\n      })\n    }, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString(message.sender), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(message.content), 1 /* TEXT */)])], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.sendMessage && $options.sendMessage(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.newMessage = $event),\n    placeholder: \"Type a message...\",\n    autocomplete: \"off\",\n    class: \"form-control\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.newMessage]]), _cache[6] || (_cache[6] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"primary\"\n  }, \"Send\", -1 /* HOISTED */))])])], 32 /* NEED_HYDRATION */)])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","id","_createElementBlock","_hoisted_1","_createElementVNode","$data","showUsernamePage","_hoisted_2","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","connect","_hoisted_4","type","$event","username","placeholder","autocomplete","_createCommentVNode","_hoisted_5","_hoisted_6","isConnecting","_hoisted_7","_hoisted_8","_Fragment","_renderList","messages","message","index","_normalizeClass","sender","_hoisted_9","_hoisted_10","_toDisplayString","content","sendMessage","_hoisted_11","_hoisted_12","newMessage"],"sources":["/Users/suhayb/Documenten/cuuruuvoovii16/election-frontend/src/components/LiveChatPageComponent.vue"],"sourcesContent":["<template>\n  <div class=\"chat-wrapper\">\n    <noscript>\n      <h2>Sorry! Your browser doesn't support Javascript</h2>\n    </noscript>\n\n    <div v-if=\"showUsernamePage\" id=\"username-page\">\n      <div class=\"username-page-container\">\n        <h1 class=\"title\">Type your username to enter the Chatroom</h1>\n        <form @submit.prevent=\"connect\">\n          <div class=\"form-group\">\n            <input\n                type=\"text\"\n                v-model=\"username\"\n                placeholder=\"Username\"\n                autocomplete=\"off\"\n                class=\"form-control\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <button type=\"submit\" class=\"accent username-submit\">\n              Start Chatting\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n\n    <div v-if=\"!showUsernamePage\" id=\"chat-page\">\n      <div class=\"chat-container\">\n        <div class=\"chat-header\">\n          <h2>LiveChat</h2>\n        </div>\n        <div class=\"connecting\" v-if=\"isConnecting\">\n          Connecting...\n        </div>\n        <ul id=\"messageArea\">\n          <li v-for=\"(message, index) in messages\" :key=\"index\" :class=\"{'self': message.sender === username, 'other': message.sender !== username}\">\n            <div class=\"message\">\n              <div class=\"sender\">{{ message.sender }}</div>\n              <p>{{ message.content }}</p>\n            </div>\n          </li>\n        </ul>\n        <form @submit.prevent=\"sendMessage\">\n          <div class=\"form-group\">\n            <div class=\"input-group clearfix\">\n              <input\n                  type=\"text\"\n                  v-model=\"newMessage\"\n                  placeholder=\"Type a message...\"\n                  autocomplete=\"off\"\n                  class=\"form-control\"\n              />\n              <button type=\"submit\" class=\"primary\">Send</button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SockJS from \"sockjs-client\";\nimport { Stomp } from \"@stomp/stompjs\";\n\nexport default {\n  name: \"LiveChatPageComponent\",\n  data() {\n    return {\n      showUsernamePage: true,\n      username: \"\",\n      messages: [],\n      newMessage: \"\",\n      isConnecting: true,\n      stompClient: null,\n      colors: [\n        \"#2196F3\", \"#32c787\", \"#00BCD4\", \"#ff5652\",\n        \"#ffc107\", \"#ff85af\", \"#FF9800\", \"#39bbb0\"\n      ]\n    };\n  },\n  created() {\n    const storedUsername = localStorage.getItem('username');\n    if (!storedUsername) {\n      this.$router.push('/login');\n      return;\n    }\n    this.username = storedUsername;\n    this.showUsernamePage = false;\n    this.connect();\n  },\n  methods: {\n    connect() {\n      if (this.username.trim() !== \"\") {\n        this.showUsernamePage = false;\n        this.isConnecting = true;\n        const socket = new SockJS(\"http://localhost:8084/ws\");\n        this.stompClient = Stomp.over(() => socket);\n        this.stompClient.connect({}, this.onConnected, this.onError);\n      }\n    },\n    onConnected() {\n      this.stompClient.subscribe(\"/topic/public\", this.onMessageReceived);\n      this.stompClient.send(\n          \"/app/chat.addUser\",\n          {},\n          JSON.stringify({ sender: this.username, type: \"JOIN\" })\n      );\n      this.isConnecting = false;\n    },\n    onError() {\n      this.isConnecting = false;\n      alert(\"Could not connect to WebSocket server. Please refresh the page to try again.\");\n    },\n    sendMessage() {\n      if (this.newMessage.trim() !== \"\" && this.stompClient && this.stompClient.connected) {\n        const chatMessage = {\n          sender: this.username,\n          content: this.newMessage,\n          type: \"CHAT\"\n        };\n        this.stompClient.send(\"/app/chat.sendMessage\", {}, JSON.stringify(chatMessage));\n        this.newMessage = \"\";\n      } else {\n        console.error(\"STOMP connection is not active.\");\n        alert(\"Unable to send message. Please ensure you are connected to the chat.\");\n      }\n    },\n    onMessageReceived(payload) {\n      const message = JSON.parse(payload.body);\n      if (message.type === \"JOIN\") {\n        message.content = `${message.sender} joined!`;\n      } else if (message.type === \"LEAVE\") {\n        message.content = `${message.sender} left!`;\n      }\n      this.messages.push(message);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.chat-wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #f4f4f4;\n}\n\n.chat-container {\n  width: 600px; /* Pas de breedte hier aan */\n  height: 700px; /* Pas de hoogte hier aan */\n  background-color: #fff;\n  border-radius: 10px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n  display: flex;\n  flex-direction: column;\n}\n\n.chat-header {\n  background-color: #7417c9;\n  color: white;\n  padding: 15px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  text-align: center;\n}\n\nul#messageArea {\n  flex: 1;\n  padding: 10px;\n  list-style: none;\n  margin: 0;\n  overflow-y: auto;\n}\n\n.message {\n  padding: 8px 12px;\n  border-radius: 10px;\n  max-width: 75%;\n  margin-bottom: 10px;\n  word-wrap: break-word;\n}\n\n.sender {\n  font-weight: bold;\n  font-size: 12px;\n  color: #666;\n  margin-bottom: 5px;\n}\n\nli.self .message {\n  background-color: #c67eff;\n  align-self: flex-end;\n  text-align: right;\n}\n\nli.other .message {\n  background-color: #ffa56f;\n  align-self: flex-start;\n  text-align: left;\n  border: 1px solid #ccc;\n}\n\nform {\n  display: flex;\n  padding: 10px;\n  background-color: #f4f4f4;\n}\n\ninput[type=\"text\"] {\n  flex: 1;\n  padding: 8px;\n  border-radius: 20px;\n  border: 1px solid #ccc;\n  margin-right: 10px;\n}\n\nbutton.primary {\n  background-color: #9700fc;\n  border-radius: 50%;\n  padding: 10px;\n  border: none;\n  color: white;\n  font-size: 18px;\n  cursor: pointer;\n}\n\nbutton.primary:hover {\n  background-color: #7a00cc;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}